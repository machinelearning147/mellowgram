import React,{useRef,useState}from'react';import{saveImageBlob}from'../utils/storage';export default function ImageUploader({onUpload}){const fileRef=useRef();const[loading,setLoading]=useState(false);async function handleFiles(files){if(!files||files.length===0)return;setLoading(true);try{for(const f of Array.from(files)){await saveImageBlob(f,{name:f.name,size:f.size,type:f.type});}onUpload&&onUpload();}catch(e){console.error('Upload error',e);alert('Failed to save image locally.');}finally{setLoading(false);}}function openFile(){fileRef.current&&fileRef.current.click();}return(<div className='flex gap-2'><input ref={fileRef} type='file' accept='image/*' multiple className='hidden' onChange={(e)=>handleFiles(e.target.files)}/><button onClick={openFile} className='px-3 py-2 rounded-xl bg-white border shadow-sm'>Upload Photos</button>{loading? <div className='text-sm text-[var(--text-muted)]'>Savingâ€¦</div>:null}</div>);}