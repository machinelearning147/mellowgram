import React,{createContext,useContext,useState,useEffect}from'react';const AuthContext=createContext();export function useAuth(){return useContext(AuthContext);}function loadUser(){try{const s=localStorage.getItem('mg_user');return s?JSON.parse(s):null;}catch(e){return null;}}export function AuthProvider({children}){const[user,setUser]=useState(loadUser());useEffect(()=>{if(user)localStorage.setItem('mg_user',JSON.stringify(user));else localStorage.removeItem('mg_user');},[user]);const signInEmail=async({email,password})=>{const u={id:email,email,name:email.split('@')[0],avatar:'ðŸ‘¤'};setUser(u);return u;};const signInGuest=()=>{const u={id:'guest:'+Date.now(),name:'Guest',avatar:'ðŸ‘¤'};setUser(u);return u;};const signOut=()=>setUser(null);const value={user,signInEmail,signInGuest,signOut};return<AuthContext.Provider value={value}>{children}</AuthContext.Provider>}